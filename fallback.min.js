/* fallback.js v0.1 | https://github.com/sgarbesi/fallback.js | Salvatore Garbesi <sal@dolox.com> | (c) 2013 Dolox Inc. */
fallback={callback:null,ready_invoke:!0,ready_functions:[],head:document.getElementsByTagName("head")[0],libraries:{},libraries_count:0,loaded:{},loaded_count:0,broken:{},broken_count:0,shim:{},initialize:function(){var a,b;for(a in this.libraries)b=this.libraries[a],b instanceof Array||(this.libraries[a]=b=[b]),this.libraries_count++,this.shim[a]||this.spawn(a,b[0],0)},completed:function(){this.libraries_count==this.loaded_count+this.broken_count&&(this.ready_invoke&&this.ready_invocation(),this.callback(this.loaded,
this.broken))},error:function(a,b){b=parseInt(b);this.broken[a]||(this.broken[a]=[]);this.broken[a][this.broken[a].length]=this.libraries[a][b];b<this.libraries[a].length-1?this.spawn(a,this.libraries[a][b+1],b+1):this.broken_count++;this.completed()},load:function(a,b){this.ready_invoke=!0;if(b){!1===b.ready_invoke&&(this.ready_invoke=b.ready_invoke);if(!b.callback||b.callback&&"[object Function]"!=={}.toString.call(b.callback))b.callback=function(){};b.shim&&(this.shim=b.shim)}else b={callback:function(){}};
this.callback=b.callback;this.libraries=a;this.initialize()},ready:function(a){this.ready_functions[this.ready_functions.length]=a},ready_invocation:function(){if(this.ready_functions)for(var a in this.ready_functions)this.ready_functions[a](this.loaded,this.broken)},spawn:function(a,b,d){var c;-1<b.indexOf(".css")?(c=document.createElement("link"),c.rel="stylesheet",c.href=b):(c=document.createElement("script"),c.src=b);c.onload=function(){fallback.success(a,d)};c.onerror=function(){fallback.error(a,
d)};this.head.appendChild(c)},success:function(a,b){this.loaded[a]=this.libraries[a][b];this.loaded_count++;this.shim&&this.shim_invocation(a);this.completed()},shim_invocation:function(){for(var a in this.shim){var b=0;if(!this.loaded[a]){for(var d in this.shim[a])this.loaded[this.shim[a][d]]&&b++;b==this.shim[a].length&&(this.spawn(a,this.libraries[a][0],0),delete this.shim[a])}}}};window.fallback=fallback;