<!DOCTYPE html>
<html>
	<head>
		<script data-base="./" data-bootstrap="indexx.js" src="../../dist/fallback.js"></script>
		<title>Fallback Example</title>
	</head>
<script>
$ = 123;

function jsfile() {
	//var scripts = document.getElementsByTagName("script"),
	//src = scripts[scripts.length -1].src;
	//return document.currentScript;
	//return window.payload_id;

}


(function(define, fallback) {
	fallback.config({
		debug: false,
		base: '', // default
		globals: true, // default, for requirejs turn off by def

		paths: {
			'#postload': [
				'index.failfirst.css',
				'index.fail.css',
				'index.css',
				'index.dontrequest.css'
			],

			'json': [
				'//cdnjs.cloudflare.com/ajax/libs/json2/20121008/json2.min',
				'//json.fail.plz'
			],

			jqueryious: [
				'//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.FAIL_ON_PURPOSE.min',
				'//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min',
				'//cdnjs.cloudflare.com/ajax/libs/jquery/1.9.0/jquery.min.js'
			],

			jqueryui: [
				'//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js',
				'//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js',
				'//js/loader.js?i=vendor/jquery-ui.min.js'
			]
		},

		init: {
			jqueryious: function(jqueryious) {
				console.log('wtf');
			}
		},

		exports: {
			'jqueryious': 'jQuery',
			'jqueryui': 'jQuery.ui',
			'json': 'JSON'
		},

		dependencies: {
			jqueryui: ['jqueryious'],
			json: ['jqueryui']
		}
	});
	
	define('jquery', function(jqueryious) {
		return jqueryious.noConflict(true);
	});

	require(function(jquery) {
		console.log('require says: ', jquery);
	});

	/**
	require(function(test) {
		console.log('require says: ', test);
	});
	
	// LOCAL DEFINE/REQUIRE TEST
	define('require_test1', {
		wtf: 'yep'
	});

	require(function(require_test1) {
		console.log('require says: ', require_test1);
	});

	// LAZY LOADED NESTED DEPS
	require(function(test) {
		// @todo add autospawn toggle for stop this from going down
		//console.log('this is wrong when the test files are not in the config and they are dynamically spawned');
		
		console.log('test 0 > ', test);

	});
	

	/**

	// LAZY LOADED NESTED DEPS

	


	// SAME FILE DEFINE REQUIRE
	define('a', function() {
		return 'jerkoffx2';
	});

	require(function(a) {
		console.log('a> ', a);

	});


	// LEGACY .READY TEST
	fallback.ready(function() {

	});



	// REQUIRE TESTS
	require(function(jQuery) {
		console.log(jQuery);
	});

	require(['jQuery'], function(jQuery) {
		console.log(jQuery);
	});

	require(['jQuery', 'jQuery'], function(jQuery, jQuery) {
		console.log(jQuery, jQuery);
	});

	require(['a', 'jQuery'], function(a, jQuery) {
		console.log(a, jQuery);
	});




	// TEST #9
	define('b', ['json'], function(john) {
	    return 5;
	});

	define(function(john, exports, module) {
		exports.dog = 'fuck outta here';
	});

	john = 'doe';

	require(function(a, b, john, dog) {
		console.log('wtf > ' + b + ' - ' + john, dog);
	});

*/
})(define, fallback);

</script>
	<body>
		<button id="postload">TEST AFTER LOAD</button>
		<strong>LOAD AWAY! :-O</strong>
	</body>
</html>